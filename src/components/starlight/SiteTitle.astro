

---
import { logos } from 'virtual:starlight/user-images';
import config from 'virtual:starlight/user-config';
const { siteTitle, siteTitleHref } = Astro.locals.starlightRoute;
---

<a href={siteTitleHref} class="site-title sl-flex">
  {
    config.logo && logos.dark && (
      <>
        <img
          class:list={{ 'light:sl-hidden print:hidden': !('src' in config.logo) }}
          alt={config.logo.alt}
          src={logos.dark.src}
          width={logos.dark.width}
          height={logos.dark.height}
        />
        {!('src' in config.logo) && (
          <img
            class="dark:sl-hidden print:block"
            alt={config.logo.alt}
            src={logos.light?.src}
            width={logos.light?.width}
            height={logos.light?.height}
          />
        )}
      </>
    )
  }
  <span 
    class:list={{ 'sr-only': config.logo?.replacesTitle, glitch: true }} 
    data-text={siteTitle} 
    translate="no"
  >
    {siteTitle}
  </span>
</a>

<style>
  @layer starlight.core {
    .site-title {
      align-items: center;
      gap: var(--sl-nav-gap);
      font-size: var(--sl-text-h5);
      font-weight: 600;
      text-decoration: none;
      white-space: nowrap;
      min-width: 0;
    }

    span {
      overflow: hidden;
      display: inline-block;
      position: relative;
    }

    img {
      height: calc(var(--sl-nav-height) - 2 * var(--sl-nav-pad-y));
      width: auto;
      max-width: 100%;
      object-fit: contain;
      object-position: 0 50%;
    }

    /* Glitch continuo */
    .glitch {
      position: relative;
      font-family: 'Share Tech Mono', 'Courier New', monospace;
      color: #f5f5f5;
      font-size: 1.4rem;
      text-transform: uppercase;
      font-weight: 700;
    }

    .glitch::before,
    .glitch::after {
      content: attr(data-text);
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }

    .glitch::before {
      left: 2px;
      text-shadow: -2px 0 #0d0b0a;
      animation: glitch-anim 3.2s infinite linear alternate-reverse;
    }

    .glitch::after {
      left: -2px;
      text-shadow: 2px 0 #701010;
      animation: glitch-anim2 3.2s infinite linear alternate-reverse;
    }

    @keyframes glitch-anim {
      0% { clip-path: inset(0 0 80% 0); transform: translate(1px, -1px); }
      20% { clip-path: inset(10% 0 60% 0); transform: translate(-2px, 1px); }
      40% { clip-path: inset(20% 0 40% 0); transform: translate(-1px, 0); }
      60% { clip-path: inset(30% 0 20% 0); transform: translate(2px, -1px); }
      80% { clip-path: inset(40% 0 10% 0); transform: translate(1px, 1px); }
      100% { clip-path: inset(0 0 80% 0); transform: translate(-1px, 0); }
    }

    @keyframes glitch-anim2 {
      0% { clip-path: inset(30% 0 20% 0); transform: translate(-1px, 0); }
      20% { clip-path: inset(40% 0 10% 0); transform: translate(1px, -1px); }
      40% { clip-path: inset(50% 0 0 0); transform: translate(-2px, 1px); }
      60% { clip-path: inset(0 0 80% 0); transform: translate(2px, -1px); }
      80% { clip-path: inset(10% 0 60% 0); transform: translate(1px, 0); }
      100% { clip-path: inset(20% 0 40% 0); transform: translate(-1px, 1px); }
    }
  }
</style>

